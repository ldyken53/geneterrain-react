"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.greadability=void 0;var greadability=function(y,i,o){function l(t){for(var e=0,r=t.length,n=0;e<r;++e)n+=t[e];return n}var s,t,e,h=y.length,d=new Array(y.length),r={crossing:0,crossingAngle:0,angularResolutionMin:0,angularResolutionDev:0};function u(t,e,r){var n=[r[0]-t[0],r[1]-t[1]],o=[e[0]-t[0],e[1]-t[1]];return n[0]*o[1]-o[0]*n[1]}function c(t,e,r){return Math.min(t[0],e[0])<=r[0]&&r[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=r[1]&&r[1]<=Math.max(t[1],e[1])}function g(t,e){return t.index!==e.index&&t.source!==t.target&&e.source!==e.target&&(t.source!==e.source&&t.source!==e.target&&t.target!==e.source&&t.target!==e.target&&function(t,e){var r,n,o,a;return r=u(e[0],e[1],t[0]),n=u(e[0],e[1],t[1]),o=u(t[0],t[1],e[0]),a=u(t[0],t[1],e[1]),(0<r&&n<0||r<0&&0<n)&&(0<o&&a<0||o<0&&0<a)||(!(0!==r||!c(e[0],e[1],t[0]))||(!(0!==n||!c(e[0],e[1],t[1]))||(!(0!==o||!c(t[0],t[1],e[0]))||!(0!==a||!c(t[0],t[1],e[1])))))}([[t.source.x,t.source.y],[t.target.x,t.target.y]],[[e.source.x,e.source.y],[e.target.x,e.target.y]]))}function p(t,e){var r,n,o,a,u,c;return t[0][0]===e[1][0]&&t[0][1]===e[1][1]?(r=e[1],e[1]=e[0],e[0]=r):t[1][0]===e[0][0]&&t[1][1]===e[0][1]?(r=t[1],t[1]=t[0],t[0]=r):t[1][0]===e[1][0]&&t[1][1]===e[1][1]&&(r=t[1],t[1]=t[0],t[0]=r,r=e[1],e[1]=e[0],e[0]=r),u=[[t[0][0]-t[0][0],t[0][1]-t[0][1]],[t[1][0]-t[0][0],t[1][1]-t[0][1]]],0===(n=Math.hypot(u[1][0],u[1][1]))?0:(u[1][0]/=n,u[1][1]/=n,o=180*Math.acos(u[1][0])/Math.PI,u[1][1]<0&&(o=360-o),c=[[e[0][0]-e[0][0],e[0][1]-e[0][1]],[e[1][0]-e[0][0],e[1][1]-e[0][1]]],0===(n=Math.hypot(c[1][0],c[1][1]))?0:(c[1][0]/=n,c[1][1]/=n,a=180*Math.acos(c[1][0])/Math.PI,c[1][1]<0&&(a=360-a),o<=a?a-o:360-(o-a)))}function f(t,e){var r=(t[1][1]-t[0][1])/(t[1][0]-t[0][0]),n=(e[1][1]-e[0][1])/(e[1][0]-e[0][0]);if(r==n)return c(t[0],t[1],e[0])&&c(t[0],t[1],e[1])&&c(e[0],e[1],t[0])&&c(e[0],e[1],t[1])?0:180;var o=Math.abs(Math.atan(r)-Math.atan(n));return 180*(o>Math.PI/2?Math.PI-o:o)/Math.PI}!function(){var t,e,r={};for(i=i.filter(function(t){return t.source!==t.target}),s=i.length,o=o||function(t){return t.index},t=0;t<h;++t)y[t].index=t,d[t]=[],r[o(y[t],t,r)]=y[t];for(t=0;t<s;++t)"object"!==_typeof((e=i[t]).source)&&(e.source=r[e.source]),"object"!==_typeof(e.target)&&(e.target=r[e.target]);var n=[];for(i.forEach(function(t){var e=t.source,r=t.target;e.index>r.index?n.push({source:r,target:e}):n.push({source:e,target:r})}),(i=n).sort(function(t,e){return t.source.index<e.source.index?-1:t.source.index>e.source.index?1:t.target.index<e.target.index?-1:t.target.index>e.target.index?1:0}),t=1;t<i.length;)i[t-1].source.index===i[t].source.index&&i[t-1].target.index===i[t].target.index?i.splice(t,1):++t;for(s=i.length,t=0;t<s;++t)(e=i[t]).index=t,d[e.source.index].push(e),d[e.target.index].push(e)}(),t=s*(s-1)/2-l(d.map(function(t){return t.length*(t.length-1)}))/2;var n=function(){var t,e,r,n,o,a,u=0,c=0;for(t=0;t<s;++t)for(e=t+1;e<s;++e)g(r=i[t],n=i[e])&&(o=[[r.source.x,r.source.y],[r.target.x,r.target.y]],a=[[n.source.x,n.source.y],[n.target.x,n.target.y]],++u,c+=Math.abs(70-f(o,a)));return{c:2*u,d:2*c}}();e=70*n.c,r.crossing=1-(0<t?n.c/t:0),r.crossingAngle=1-(0<e?n.d/e:0);var a=function(){var t,e,r,n,o,a,u,c,i,s,g,f=0,x=0;for(e=d.filter(function(t){return 1<=t.length}).length,t=0;t<h;++t)r=y[t],u=[[r.x,r.y],[r.x+1,r.y]],(a=d[t]).length<=1||(o=360/a.length,a.sort(function(t,e){c=[[t.source.x,t.source.y],[t.target.x,t.target.y]],i=[[e.source.x,e.source.y],[e.target.x,e.target.y]];var r=p(u,c),n=p(u,i);return r<n?-1:n<r?1:0}),s=a.map(function(t,e){return g=a[(e+1)%a.length],c=[[t.source.x,t.source.y],[t.target.x,t.target.y]],i=[[g.source.x,g.source.y],[g.target.x,g.target.y]],p(c,i)}),n=Math.min.apply(null,s),f+=Math.abs(o-n)/o,x+=l(s.map(function(t){return Math.abs(o-t)/o}))/(2*a.length-2));return{resMin:f/=e,resDev:x/=e}}();return r.angularResolutionMin=1-a.resMin,r.angularResolutionDev=1-a.resDev,r};exports.greadability=greadability;
//# sourceMappingURL=greadibility.min.js.map
